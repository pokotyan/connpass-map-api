version: 1
task_definition:
  task_execution_role: ecs-task-execution
  ecs_network_mode: awsvpc
  task_size:
    cpu_limit: "2048"
    mem_limit: "8GB"
  services:
    app:
      healthcheck:
        test: ["CMD-SHELL", "curl localhost:7777/status || exit 1"]
run_params:
  network_configuration:
    awsvpc_configuration:
      subnets:
        # private security group
        - subnet-0c96f29b7f1eb9b02
        - subnet-05aa23361acf7750e
      security_groups:
        # ecs_service_sg
        - sg-01b19966d8bdf3978
      assign_public_ip: ENABLED
